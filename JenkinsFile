node {

    stage('Git Pull') { // for display purposes

        git branch: 'main', credentialsId: 'mshaya200', url: 'https://github.com/mshaya200/DevOpsAssignment'
        echo "Pull Successful"
        sh "pwd"
        sh "pwd"
    }
    stage('Compile') {
        // Run the maven build
        sh "javac CurrencyConverter.java"
        echo "Compile successful"
        
    }
stage('SCM') {
    checkout scm
  }
  stage('SonarQube Analysis') {
    def mvn = tool 'Default Maven';
    withSonarQubeEnv() {
      sh "${mvn}/bin/mvn clean verify sonar:sonar -Dsonar.projectKey=mshaya200_DevOpsAssignment_AYQpnPfVtw_hQr5_e7hL"
    }
  }    
    stage('Results') {
       sh "java CurrencyConverter 50 dollars"  
        

    }
}
